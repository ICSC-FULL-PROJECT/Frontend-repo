<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ICSC 2026 - Speaker Registration</title>
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700,400italic,700italic" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/css/intlTelInput.css">
    <link rel="icon" href="title.png" type="image/x-icon">
    <style>
        /* Include all the same CSS styles from the original file */
        :root {
            --primary-color: #28a745;
            --primary-dark: #218838;
            --secondary-color: #007bff;
            --success-color: #28a745;
            --danger-color: #dc3545;
            --light-gray: #f8f9fa;
            --border-color: #e9ecef;
            --text-dark: #2c3e50;
            --text-light: #6c757d;
        }
        
        * {
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Montserrat', sans-serif;
            background-color: #ffffff;
            line-height: 1.6;
            color: var(--text-dark);
            margin: 0;
            padding: 0;
        } .site-background {
            background-color: #ffffff !important;
        }
        
        .navbar {
            background: white;
            border: none;
            margin-bottom: 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            padding: 0.5rem 0;
        }
        
        .jumbotron {
            background-color: #ffffff;
            margin-bottom: 0;
            padding: 30px 0;
        }
        
        .logo img {
            max-height: 80px;
            width: auto;
        }
        
        .progress-container {
            margin: 30px 0;
            position: relative;
            padding: 0 15px;
        }
        
        /* === Animated Dot Progress Indicator === */
        .progress-indicator.dots {
            position: relative;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 0 auto;
            width: 100%;
            max-width: 500px;
        }

        /* Background line */
        .progress-indicator.dots::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            width: 100%;
            height: 2px;
            background: #ddd;
            transform: translateY(-50%);
            z-index: 1;
            border-radius: 2px;
        }

        /* Animated fill line */
        .progress-line {
            position: absolute;
            top: 50%;
            left: 0;
            height: 2px;
            background: #008751;
            transform: translateY(-50%);
            border-radius: 2px;
            width: 0%;
            z-index: 2;
            transition: width 0.4s ease-in-out;
        }

        /* Dots */
        .progress-indicator.dots .dot {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background-color: #ccc;
            position: relative;
            z-index: 3;
            transition: all 0.3s ease;
            flex-shrink: 0;
        }

        /* Active + completed state */
        .progress-indicator.dots .dot.active {
            background-color: #008751;
            transform: scale(1.2);
        }

        .progress-indicator.dots .dot.completed {
            background-color: #4caf50;
        }
        
        .form-section {
            background: white;
            border-radius: 8px;
            padding: 25px 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
            width: 100%;
        }
        
        .registrant-cards {
            display: grid;
            gap: 15px;
            margin-bottom: 20px;
            grid-template-columns: 1fr;
        }
        
        .registrant-card {
            border: 2px solid var(--border-color);
            border-radius: 8px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
        }
        
        .registrant-card:hover {
            border-color: var(--secondary-color);
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 123, 255, 0.1);
        }
        
        .registrant-card.selected {
            border-color: var(--primary-color);
            background: #f8fff9;
        }
        
        .registrant-card h3 {
            margin-bottom: 10px;
            color: var(--text-dark);
            font-size: 1.3rem;
        }
        
        .registrant-card p {
            color: var(--text-light);
            margin-bottom: 8px;
            font-size: 0.9rem;
            line-height: 1.5;
        }
        
        .registrant-card .price {
            font-size: 1.1rem;
            font-weight: bold;
            color: var(--success-color);
            margin-top: 10px;
        }
        
        .has-star::after {
            content: " *";
            color: var(--danger-color);
        }
        
        .btn-standard {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
            color: white;
            padding: 14px 25px;
            font-weight: bold;
            font-size: 1rem;
            border-radius: 8px;
            width: 100%;
            margin: 5px 0;
        }
        
        .btn-standard:hover {
            background-color: var(--primary-dark);
            border-color: var(--primary-dark);
            color: white;
        }
        
        .btn-outline-standard {
            background-color: transparent;
            border-color: var(--primary-color);
            color: var(--primary-color);
            padding: 14px 25px;
            font-weight: bold;
            border-radius: 8px;
            width: 100%;
            margin: 5px 0;
        }
        
        .btn-outline-standard:hover {
            background-color: var(--primary-color);
            color: white;
        }
        
        .social-media-links a {
            color: var(--primary-color) !important;
        }
        
        .footer-container {
            background-color: var(--light-gray);
            padding: 30px 0;
            margin-top: 40px;
        }
        
        .help-block-error {
            color: var(--danger-color);
            font-size: 0.8em;
            display: none;
            margin-top: 5px;
        }
        
        .hint-block {
            font-size: 0.8em;
            color: var(--text-light);
            margin-top: 5px;
        }
        
        .form-group {
            margin-bottom: 1.2rem;
            position: relative;
        }
        
        .form-row {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
        }
        
        .error-message {
            background: #f8d7da;
            color: #721c24;
            padding: 12px;
            border-radius: 6px;
            margin-bottom: 15px;
            border: 1px solid #f5c6cb;
            display: none;
            font-size: 0.9rem;
        }
        
        input.error, select.error, textarea.error {
            border-color: var(--danger-color);
        }
        
        .booking-note {
            margin-top: 10px;
            font-style: italic;
            color: var(--text-light);
            font-size: 0.8rem;
        }
        
        .confirmation-details {
            background: var(--light-gray);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .confirmation-item {
            margin-bottom: 12px;
            padding-bottom: 12px;
            border-bottom: 1px solid var(--border-color);
        }
        
        .confirmation-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }
        
        .confirmation-label {
            font-weight: bold;
            color: #495057;
            margin-bottom: 5px;
            font-size: 0.9rem;
        }
        
        .confirmation-value {
            color: var(--text-light);
            font-size: 0.9rem;
        }
        
        .success-message {
            background: #d4edda;
            color: #155724;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #c3e6cb;
            text-align: center;
            margin: 20px 0;
        }
        
        .auto-login-message {
            background: #d1ecf1;
            color: #0c5460;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #bee5eb;
            margin: 20px 0;
            text-align: center;
        }
        
        .package-cards {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            margin: 15px 0;
        }
        
        .package-card {
            border: 2px solid var(--border-color);
            border-radius: 8px;
            padding: 18px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
        }
        
        .package-card:hover {
            border-color: var(--secondary-color);
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 123, 255, 0.1);
        }
        
        .package-card.selected {
            border-color: var(--primary-color);
            background: #f8fff9;
        }
        
        .package-card h4 {
            margin-bottom: 12px;
            color: var(--text-dark);
            text-align: center;
            font-size: 1.2rem;
        }
        
        .package-card .price {
            font-size: 1.3rem;
            font-weight: bold;
            color: var(--success-color);
            text-align: center;
            margin: 12px 0;
        }
        
        .package-card ul {
            padding-left: 18px;
            margin-bottom: 12px;
        }
        
        .package-card li {
            margin-bottom: 6px;
            color: var(--text-light);
            font-size: 0.85rem;
            line-height: 1.4;
        }
        
        .package-card .limited {
            color: var(--danger-color);
            font-weight: bold;
            text-align: center;
            margin-top: 8px;
            font-size: 0.8rem;
        }
        
        .payment-section {
            background: var(--light-gray);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .payment-option {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
            padding: 12px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            cursor: pointer;
            background: white;
        }
        
        .payment-option.selected {
            border-color: var(--primary-color);
            background: #f8fff9;
        }
        
        .payment-option input {
            margin-right: 10px;
        }
        
        .payment-option label {
            margin-bottom: 0;
            cursor: pointer;
            font-size: 0.9rem;
        }
        
        .payment-form {
            margin-top: 15px;
            display: none;
        }
        
        .iti {
            width: 100%;
        }
        
        .phone-input-container {
            position: relative;
        }
        
        .phone-input-container .form-control {
            padding-left: 52px;
        }
        
        .pdf-viewer {
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 18px;
            margin: 18px 0;
            background: var(--light-gray);
        }
        
        .pdf-viewer h5 {
            margin-bottom: 12px;
            color: var(--text-dark);
            font-size: 1.1rem;
        }
        
        .pdf-placeholder {
            background: white;
            border-radius: 6px;
            padding: 30px 20px;
            text-align: center;
            border: 2px dashed var(--border-color);
        }
        
        .pdf-placeholder i {
            font-size: 2.5rem;
            color: var(--primary-color);
            margin-bottom: 12px;
        }

        .sponsor-package-info {
            background: #f8f9fa;
            border-left: 4px solid var(--primary-color);
            padding: 18px;
            margin: 18px 0;
            border-radius: 4px;
        }

        .sponsor-package-info h5 {
            color: var(--primary-color);
            margin-bottom: 8px;
            font-size: 1.1rem;
        }

        /* Password toggle */
        .password-toggle {
            position: absolute;
            right: 12px;
            top: 38px;
            background: none;
            border: none;
            color: var(--text-light);
            cursor: pointer;
            z-index: 10;
        }

        .password-toggle:focus {
            outline: none;
        }

        /* File upload styles */
        .file-upload-container {
            margin-top: 15px;
        }

        .file-upload-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--text-dark);
        }

        .file-upload-input {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            background: white;
        }

        .file-hint {
            font-size: 0.8rem;
            color: var(--text-light);
            margin-top: 5px;
        }

        /* Button container for mobile */
        .button-container {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 20px;
        }

        /* Container padding for mobile */
        .container {
            padding-left: 15px;
            padding-right: 15px;
            max-width: 100%;
        }

        /* Fix for button layout issue */
        .content-section .container {
            position: relative;
            z-index: 1;
        }

        .progress-container {
            z-index: 2;
        }

        .form-section {
            position: relative;
            z-index: 1;
        }

        /* Loading state for photo upload */
        .photo-uploading {
            opacity: 0.6;
            pointer-events: none;
        }

        .photo-uploading::after {
            content: 'Uploading...';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 12px;
            z-index: 10;
        }

        /* Mobile-specific improvements */
        @media (max-width: 768px) {
            .navbar-brand {
                font-size: 1rem;
            }
            
            .jumbotron h1 {
                font-size: 1.5rem;
            }
            
            .jumbotron .lead {
                font-size: 0.9rem;
            }
            
            .form-section {
                padding: 20px 15px;
            }
            
            .registrant-card, .package-card {
                padding: 15px;
            }
            
            .confirmation-details, .payment-section {
                padding: 15px;
            }
            
            .pdf-viewer {
                padding: 15px;
            }
            
            .btn-standard, .btn-outline-standard {
                padding: 12px 20px;
                font-size: 0.95rem;
            }
        }

        @media (max-width: 576px) {
            .progress-indicator.dots {
                max-width: 100%;
            }
            
            .progress-indicator.dots .dot {
                width: 14px;
                height: 14px;
            }
            
            .registrant-card h3 {
                font-size: 1.2rem;
            }
            
            .package-card h4 {
                font-size: 1.1rem;
            }
            
            .success-message {
                padding: 15px;
            }
            
            .container {
                padding-left: 10px;
                padding-right: 10px;
            }
        }

        @media (min-width: 768px) {
            .registrant-cards {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .package-cards {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .form-row {
                grid-template-columns: 1fr 1fr;
            }
            
            .button-container {
                flex-direction: row;
                justify-content: space-between;
            }
            
            .btn-standard, .btn-outline-standard {
                width: auto;
                margin: 0;
            }
        }

        @media (min-width: 992px) {
            .package-cards {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .registrant-cards {
                grid-template-columns: repeat(2, 2fr);
            }
        }

        /* Touch-friendly improvements */
        @media (hover: none) {
            .registrant-card:hover,
            .package-card:hover {
                transform: none;
                border-color: var(--border-color);
            }
            
            .registrant-card.selected,
            .package-card.selected {
                border-color: var(--primary-color);
                transform: scale(1.02);
            }
        }

        /* Focus styles for accessibility */
        button:focus,
        input:focus,
        select:focus,
        textarea:focus {
            outline: 2px solid var(--primary-color);
            outline-offset: 2px;
        }

        /* Loading state */
        .btn-loading {
            position: relative;
            color: transparent;
        }

        .btn-loading::after {
            content: '';
            position: absolute;
            width: 20px;
            height: 20px;
            top: 50%;
            left: 50%;
            margin-left: -10px;
            margin-top: -10px;
            border: 2px solid #ffffff;
            border-radius: 50%;
            border-right-color: transparent;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }
    </style>
</head>
<body class="standard-page">
    <!-- Navigation -->
    <div id="nav-wrap">
        <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <div class="container">
                <div class="d-flex align-items-center">
                    <div class="logo me-3">
                        <img src="icsc-logos.png" alt="ICSC 2026" class="img-fluid">
                    </div>
                    <span class="navbar-brand mb-0 h1"></span>
                </div>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item active">
                            <a class="nav-link" href="login.html">SIGN IN</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="agenda.html">AGENDA</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </div>

    <!-- Header -->
    <div id="header-wrap" class="jumbotron site-background">
        <div class="container">
            <div class="text-center">
                <h1>INTERNATIONAL CIVIL SERVICE CONFERENCE (ICSC) 2026</h1>
                <p class="lead">Building Global Civil Service Excellence</p>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="content-section">
        <div class="container">
            <!-- Progress Indicator (Dot Style) -->
            <div class="progress-container">
                <div class="progress-indicator dots" id="progress-indicator">
                    <span class="dot active" id="dot-1" title="Account Information"></span>
                    <span class="dot" id="dot-2" title="Profile Information"></span>
                    <span class="dot" id="dot-3" title="Confirmation"></span>
                    <div class="progress-line" id="progress-line"></div>
                </div>
            </div>
            
            <div class="text-center mb-4">
                <p class="lead"><strong>To return to the International Civil Service Conference website please click <a href="Index.html" target="_blank">here</a>.</strong></p>
            </div>

            <!-- Step 1: Account Creation Section -->
            <div id="account-section" class="form-section">
                <h2 class="text-center mb-4">Create Your Account</h2>
                
                <form id="account-form">
                    <div class="form-group">
                        <label class="has-star" for="email">Email Address</label>
                        <input type="email" id="email" name="email" class="form-control" required>
                        <div class="help-block-error" id="email-error"></div>
                    </div>
                    
                    <div class="form-group">
                        <label class="has-star" for="password">Choose a Password</label>
                        <div class="position-relative">
                            <input type="password" id="password" name="password" class="form-control" required>
                            <button type="button" class="password-toggle" id="togglePassword">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                        <div class="help-block-error" id="password-error"></div>
                        <div class="hint-block">Creating a password lets you log back in to modify your registration and access your dashboard</div>
                    </div>
                    
                    <div class="form-group">
                        <label class="has-star" for="confirmPassword">Repeat Your Password</label>
                        <div class="position-relative">
                            <input type="password" id="confirmPassword" name="confirmPassword" class="form-control" required>
                            <button type="button" class="password-toggle" id="toggleConfirmPassword">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                        <div class="help-block-error" id="confirmPassword-error"></div>
                    </div>
                </form>
                
                <div class="button-container">
                    <a href="register.html" class="btn btn-outline-standard">
                        <i class="fas fa-arrow-circle-left me-2"></i> Back to Registration Types
                    </a>
                    <button type="button" class="btn btn-standard" id="continue-to-profile-btn">
                        Continue <i class="fas fa-arrow-circle-right ms-2"></i>
                    </button>
                </div>
            </div>

            <!-- Step 2: Profile Information Section -->
            <div id="profile-section" class="form-section" style="display: none;">
                <h2 class="text-center mb-4">Speaker Profile Information</h2>
                
                <form id="profile-form">
                    <div class="form-group">
                        <label class="has-star" for="speakerPrefix">Prefix</label>
                        <select id="speakerPrefix" name="speakerPrefix" class="form-control" required>
                            <option value="">Select Prefix</option>
                            <option value="mr">Mr</option>
                            <option value="mrs">Mrs</option>
                            <option value="miss">Miss</option>
                            <option value="ms">Ms</option>
                            <option value="dr">Dr</option>
                            <option value="prof">Prof</option>
                        </select>
                        <div class="help-block-error" id="speakerPrefix-error"></div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="has-star" for="speakerFirstName">First Name</label>
                            <input type="text" id="speakerFirstName" name="speakerFirstName" class="form-control" required>
                            <div class="help-block-error" id="speakerFirstName-error"></div>
                        </div>
                        
                        <div class="form-group">
                            <label class="has-star" for="speakerLastName">Last Name</label>
                            <input type="text" id="speakerLastName" name="speakerLastName" class="form-control" required>
                            <div class="help-block-error" id="speakerLastName-error"></div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="has-star" for="speakerCountry">Country</label>
                        <select id="speakerCountry" name="speakerCountry" class="form-control" required>
                            <option value="" disabled>Select your country</option>
                        </select>
                        <div class="help-block-error" id="speakerCountry-error"></div>
                    </div>

                    <div class="form-group">
                        <label class="has-star" for="speakerJobTitle">Job Title</label>
                        <input type="text" id="speakerJobTitle" name="speakerJobTitle" class="form-control" required>
                        <div class="help-block-error" id="speakerJobTitle-error"></div>
                    </div>
                    
                    <div class="form-group">
                        <label  for="speakerOrganization">Organization</label>
                        <input type="text" id="speakerOrganization" name="speakerOrganization" class="form-control">
                        <div class="help-block-error" id="speakerOrganization-error"></div>
                    </div>

                    <div class="form-group">
                        <label for="speakerPhoto">Profile Photo (Optional)</label>
                        <div class="d-flex align-items-center gap-3">
                            <input type="file" id="speakerPhoto" name="speakerPhoto" class="form-control" accept="image/*" style="flex-grow: 1;">
                            <div id="photoPreviewContainer" style="display: none; flex-shrink: 0; position: relative;">
                                <img id="photoPreview" src="#" alt="Profile Preview" style="height: 60px; width: 60px; object-fit: cover; border: 1px solid var(--border-color); border-radius: 50%; background: #fff; padding: 2px;">
                            </div>
                        </div>
                        <div class="help-block-error" id="speakerPhoto-error"></div>
                        <div class="hint-block">Optional: A professional headshot (Recommended: Square aspect ratio, max 2MB)</div>
                    </div>
                    
                    <div class="form-group">
                        <label class="has-star" for="speakerPhone">Phone</label>
                        <div class="phone-input-container">
                            <input type="tel" id="speakerPhone" name="speakerPhone" class="form-control" required>
                        </div>
                        <div class="help-block-error" id="speakerPhone-error"></div>
                    </div>

                    <div class="form-group">
                        <label class="d-flex justify-content-between align-items-center">
                            Social Media Profiles
                            <button type="button" class="btn btn-sm btn-outline-primary" id="add-social-btn">
                                <i class="fas fa-plus-circle me-1"></i> Add Another
                            </button>
                        </label>
                        
                        <div id="social-handles-container">
                            <div class="social-row mb-2">
                                <div class="input-group">
                                    <select class="form-control platform-select" style="max-width: 150px; background-color: #f8f9fa;">
                                        <option value="instagram.com/">Instagram</option>
                                        <option value="x.com/">X (Twitter)</option>
                                        <option value="linkedin.com/in/">LinkedIn</option>
                                        <option value="facebook.com/">Facebook</option>
                                    </select>
                                    <div class="input-group-prepend">
                                        <span class="input-group-text url-prefix">instagram.com/</span>
                                    </div>
                                    <input type="text" class="form-control handle-input" placeholder="username" required>
                                    <button type="button" class="btn btn-outline-danger remove-social-btn" style="display:none;">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <small class="form-text text-muted">Select platforms and enter your usernames. You can add up to 4 different platforms.</small>
                    </div>

                    <div class="form-group">
                        <label class="has-star" for="speakerBio">Brief Introduction/Bio</label>
                        <textarea id="speakerBio" name="speakerBio" class="form-control" rows="4" required placeholder="Please provide a brief introduction about yourself and your expertise"></textarea>
                        <div class="help-block-error" id="speakerBio-error"></div>
                    </div>
                    
                    <div class="form-group">
                        <label class="has-star" for="speakertopic">Proposed Topic/Area of Expertise</label>
                        <input type="text" id="speakertopic" name="speakertopic" class="form-control" placeholder="What topic would you like to speak about?" required>
                        <div class="help-block-error" id="speakertopic-error"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="speakerExperience">Previous Speaking Experience</label>
                        <textarea id="speakerExperience" name="speakerExperience" class="form-control" rows="3" placeholder="Please describe any previous speaking experience(Add links to them)"></textarea>
                    </div>
                </form>
                
                <div class="button-container">
                    <button type="button" class="btn btn-outline-standard" id="back-to-account-btn">
                        <i class="fas fa-arrow-circle-left me-2"></i> Back
                    </button>
                    <button type="button" class="btn btn-standard" id="continue-to-package-btn">
                        Complete Registration <i class="fas fa-check-circle ms-2"></i>
                    </button>
                </div>
            </div>


            <!-- Step 3: Confirmation Section -->
            <div id="confirmation-section" class="form-section" style="display: none;">
                <h2 class="text-center mb-4">Registration Confirmation</h2>
                
                <div class="success-message">
                    <i class="fas fa-check-circle fa-3x text-success mb-3"></i>
                    <h3>Registration Successful!</h3>
                    <p class="mb-0">Thank you for registering as a Speaker for the International Civil Service Conference 2026.</p>
                </div>
                
                <div class="confirmation-details">
                    <h4 class="mb-3">Registration Details</h4>
                    <div class="confirmation-item">
                        <div class="confirmation-label">Registrant Type</div>
                        <div class="confirmation-value" id="confirmation-type">Speaker</div>
                    </div>
                    <div class="confirmation-item">
                        <div class="confirmation-label">Name</div>
                        <div class="confirmation-value" id="confirmation-name">loading...</div>
                    </div>
                    <div class="confirmation-item">
                        <div class="confirmation-label">Email</div>
                        <div class="confirmation-value" id="confirmation-email">loading...</div>
                    </div>
                </div>
                
                <div class="text-center mt-4">
                    <p>A confirmation email has been sent to <strong id="confirmation-email-text">email...</strong> with all the details.</p>
                    <div class="button-container">
                        <button type="button" class="btn btn-standard" id="go-to-dashboard-btn">
                            Login to Your Account <i class="fas fa-arrow-circle-right ms-2"></i>
                        </button>
                        <a href="Index.html" class="btn btn-outline-standard">Return to Conference Website</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <div class="footer-container">
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <h5>INTERNATIONAL CIVIL SERVICE CONFERENCE (ICSC) 2026</h5>
                    <p>Building Global Civil Service Excellence</p>
                </div>
                <div class="col-md-6 text-md-end">
                    <h5>Contact Us</h5>
                    <p> Email: contactus@icsc.ohcsf.gov.ng</p>
                    <p> Phone: +234 810 324 7323</p>
                    <div class="social-media-links mt-3">
                        <a href="https://www.twitter.com/OHCSF_NGR" class="me-3"><i class="fab fa-twitter fa-lg"></i></a>
                        <a href="https://www.instagram.com/ngcivilservice/" class="me-3"><i class="fab fa-instagram"></i></a>
                        <a href="https://www.facebook.com/share/1Bt97sAP1Q/?mibextid=wwXIfr" class="me-3"><i class="fab fa-facebook fa-lg"></i></a>
                    </div>
                </div>
            </div>
            <div class="row mt-4">
                <div class="col-12 text-center">
                    <p class="mb-0">&copy; 2026 International Civil Service Conference. All rights reserved.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/intlTelInput.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="js/apiClient.js"></script>
    <script src="https://checkout.flutterwave.com/v3.js"></script>

    <!-- Main Application Script -->
    <script>
        // Global variables
        let currentStep = 1;
        let phoneInputs = [];
        let uploadedPhotoUrl = null; // Store uploaded photo URL

        const countries = [
            "Afghanistan", "Albania", "Algeria", "Andorra", "Angola", "Antigua and Barbuda", "Argentina", "Armenia", 
            "Australia", "Austria", "Azerbaijan", "Bahamas", "Bahrain", "Bangladesh", "Barbados", "Belarus", "Belgium", 
            "Belize", "Benin", "Bhutan", "Bolivia", "Bosnia and Herzegovina", "Botswana", "Brazil", "Brunei", "Bulgaria", 
            "Burkina Faso", "Burundi", "Cabo Verde", "Cambodia", "Cameroon", "Canada", "Central African Republic", "Chad", 
            "Chile", "China", "Colombia", "Comoros", "Congo", "Costa Rica", "Croatia", "Cuba", "Cyprus", "Czech Republic", 
            "Denmark", "Djibouti", "Dominica", "Dominican Republic", "Ecuador", "Egypt", "El Salvador", "Equatorial Guinea", 
            "Eritrea", "Estonia", "Eswatini", "Ethiopia", "Fiji", "Finland", "France", "Gabon", "Gambia", "Georgia", 
            "Germany", "Ghana", "Greece", "Grenada", "Guatemala", "Guinea", "Guinea-Bissau", "Guyana", "Haiti", "Honduras", 
            "Hungary", "Iceland", "India", "Indonesia", "Iran", "Iraq", "Ireland", "Israel", "Italy", "Jamaica", "Japan", 
            "Jordan", "Kazakhstan", "Kenya", "Kiribati", "Korea, North", "Korea, South", "Kosovo", "Kuwait", "Kyrgyzstan", 
            "Laos", "Latvia", "Lebanon", "Lesotho", "Liberia", "Libya", "Liechtenstein", "Lithuania", "Luxembourg", 
            "Madagascar", "Malawi", "Malaysia", "Maldives", "Mali", "Malta", "Marshall Islands", "Mauritania", "Mauritius", 
            "Mexico", "Micronesia", "Moldova", "Monaco", "Mongolia", "Montenegro", "Morocco", "Mozambique", "Myanmar", 
            "Namibia", "Nauru", "Nepal", "Netherlands", "New Zealand", "Nicaragua", "Niger", "Nigeria", "North Macedonia", 
            "Norway", "Oman", "Pakistan", "Palau", "Palestine", "Panama", "Papua New Guinea", "Paraguay", "Peru", 
            "Philippines", "Poland", "Portugal", "Qatar", "Romania", "Russia", "Rwanda", "Saint Kitts and Nevis", "Saint Lucia", 
            "Saint Vincent and the Grenadines", "Samoa", "San Marino", "Sao Tome and Principe", "Saudi Arabia", "Senegal", 
            "Serbia", "Seychelles", "Sierra Leone", "Singapore", "Slovakia", "Slovenia", "Solomon Islands", "Somalia", 
            "South Africa", "South Sudan", "Spain", "Sri Lanka", "Sudan", "Suriname", "Sweden", "Switzerland", "Syria", 
            "Taiwan", "Tajikistan", "Tanzania", "Thailand", "Timor-Leste", "Togo", "Tonga", "Trinidad and Tobago", "Tunisia", 
            "Turkey", "Turkmenistan", "Tuvalu", "Uganda", "Ukraine", "United Arab Emirates", "United Kingdom", "United States", 
            "Uruguay", "Uzbekistan", "Vanuatu", "Vatican City", "Venezuela", "Vietnam", "Yemen", "Zambia", "Zimbabwe"
        ];

        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
            setupSocialMediaLogic();
            setupEventListeners();
        });

        function initializeApp() {
            populateCountryDropdowns();
            initializePhoneInputs();
            updateProgressIndicator();
        }

        function populateCountryDropdowns() {
            const select = document.getElementById('speakerCountry');
            if (select) {
                countries.forEach(country => {
                    const option = document.createElement('option');
                    option.value = country;
                    option.textContent = country;
                    select.appendChild(option);
                });
                select.value = 'Nigeria';
            }
        }

        function initializePhoneInputs() {
            const input = document.getElementById('speakerPhone');
            if (input && window.intlTelInput) {
                const iti = window.intlTelInput(input, {
                    initialCountry: "ng",
                    separateDialCode: true,
                    utilsScript: "https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/utils.js"
                });
                phoneInputs.push({ id: 'speakerPhone', iti: iti });
            }
        }

        function setupSocialMediaLogic() {
            const container = document.getElementById('social-handles-container');
            const addBtn = document.getElementById('add-social-btn');
            const platforms = [
                { name: 'Instagram', value: 'instagram.com/' },
                { name: 'X (Twitter)', value: 'x.com/' },
                { name: 'LinkedIn', value: 'linkedin.com/in/' },
                { name: 'Facebook', value: 'facebook.com/' }
            ];

            if (addBtn && container) {
                addBtn.addEventListener('click', function() {
                    const rows = container.querySelectorAll('.social-row');
                    if (rows.length >= platforms.length) return alert("All platforms added.");

                    const used = Array.from(container.querySelectorAll('.platform-select')).map(s => s.value);
                    const available = platforms.filter(p => !used.includes(p.value));

                    const newRow = document.createElement('div');
                    newRow.className = 'social-row mb-2';
                    newRow.innerHTML = `
                        <div class="input-group">
                            <select class="form-control platform-select" style="max-width: 150px;">
                                ${available.map(p => `<option value="${p.value}">${p.name}</option>`).join('')}
                            </select>
                            <div class="input-group-prepend"><span class="input-group-text url-prefix">${available[0].value}</span></div>
                            <input type="text" class="form-control handle-input" placeholder="username" required>
                            <button type="button" class="btn btn-outline-danger remove-social-btn"><i class="fas fa-times"></i></button>
                        </div>`;
                    container.appendChild(newRow);
                    toggleRemoveButtons();
                });

                container.addEventListener('change', (e) => {
                    if (e.target.classList.contains('platform-select')) {
                        e.target.closest('.input-group').querySelector('.url-prefix').textContent = e.target.value;
                    }
                });

                container.addEventListener('click', (e) => {
                    if (e.target.closest('.remove-social-btn')) {
                        e.target.closest('.social-row').remove();
                        toggleRemoveButtons();
                    }
                });
            }

            function toggleRemoveButtons() {
                const rows = container.querySelectorAll('.social-row');
                rows.forEach(r => r.querySelector('.remove-social-btn').style.display = rows.length > 1 ? 'block' : 'none');
            }
        }

        function setupEventListeners() {
            // Password toggles
            document.getElementById('togglePassword')?.addEventListener('click', function() {
                togglePassVisibility('password', this);
            });
            document.getElementById('toggleConfirmPassword')?.addEventListener('click', function() {
                togglePassVisibility('confirmPassword', this);
            });

            // Navigation
            document.getElementById('continue-to-profile-btn')?.addEventListener('click', () => {
                if (validateAccountForm()) showStep(2);
            });
            document.getElementById('back-to-account-btn')?.addEventListener('click', () => showStep(1));
            
            // Final Submission
            document.getElementById('continue-to-package-btn')?.addEventListener('click', async () => {
                if (validateProfileForm()) {
                    await submitRegistration();
                }
            });

            // Profile Photo Preview Logic
            const photoInput = document.getElementById('speakerPhoto');
            const photoPreview = document.getElementById('photoPreview');
            const photoPreviewContainer = document.getElementById('photoPreviewContainer');

            if (photoInput) {
                photoInput.addEventListener('change', async function() {
                    const file = this.files[0];
                    if (file) {
                        // Check file size (max 2MB)
                        if (file.size > 2 * 1024 * 1024) {
                            showError('speakerPhoto-error', 'Image must be less than 2MB');
                            this.value = '';
                            photoPreviewContainer.style.display = 'none';
                            uploadedPhotoUrl = null;
                            return;
                        }
                        
                        // Check file type
                        const validTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/gif', 'image/webp'];
                        if (!validTypes.includes(file.type)) {
                            showError('speakerPhoto-error', 'Please upload a valid image file (JPEG, PNG, GIF, WebP)');
                            this.value = '';
                            photoPreviewContainer.style.display = 'none';
                            uploadedPhotoUrl = null;
                            return;
                        }
                        
                        hideError('speakerPhoto-error');
                        
                        // Show preview
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            photoPreview.setAttribute('src', e.target.result);
                            photoPreviewContainer.style.display = 'block';
                        }
                        reader.readAsDataURL(file);
                        
                        // Upload image to server
                        try {
                            photoPreviewContainer.classList.add('photo-uploading');
                            const imageUrl = await uploadProfilePicture(file);
                            uploadedPhotoUrl = imageUrl;
                            console.log('Photo uploaded successfully:', imageUrl);
                        } catch (error) {
                            console.error('Photo upload failed:', error);
                            showError('speakerPhoto-error', 'Failed to upload image. Please try again or skip.');
                            this.value = '';
                            photoPreviewContainer.style.display = 'none';
                            uploadedPhotoUrl = null;
                        } finally {
                            photoPreviewContainer.classList.remove('photo-uploading');
                        }
                    } else {
                        photoPreviewContainer.style.display = 'none';
                        uploadedPhotoUrl = null;
                    }
                });
            }

            // Dashboard Redirect
            document.getElementById('go-to-dashboard-btn')?.addEventListener('click', () => {
                window.location.href = 'login.html';
            });
        }

        async function uploadProfilePicture(file) {
            const formData = new FormData();
            formData.append('profile_picture', file);
            
            try {
                const response = await axios.post(
                    `${window.API_BASE_URL}/misc/upload-profile-picture`,
                    formData,
                    {
                        headers: {
                            'Content-Type': 'multipart/form-data'
                        },
                        timeout: 30000 // 30 seconds for file upload
                    }
                );
                
                if (response.data && response.data.url) {
                    return response.data.url;
                } else if (response.data && response.data.imageUrl) {
                    return response.data.imageUrl;
                } else if (response.data && response.data.image_url) {
                    return response.data.image_url;
                } else {
                    throw new Error('No image URL returned from server');
                }
            } catch (error) {
                console.error('Upload error:', error);
                const errorMessage = error.response?.data?.message || error.message || 'Failed to upload image';
                throw new Error(errorMessage);
            }
        }

        function togglePassVisibility(id, btn) {
            const input = document.getElementById(id);
            const type = input.getAttribute('type') === 'password' ? 'text' : 'password';
            input.setAttribute('type', type);
            btn.innerHTML = type === 'password' ? '<i class="fas fa-eye"></i>' : '<i class="fas fa-eye-slash"></i>';
        }

        async function submitRegistration() {
            const btn = document.getElementById('continue-to-package-btn');
            btn.disabled = true;
            btn.innerHTML = 'Processing... <i class="fas fa-spinner fa-spin ms-2"></i>';

            try {
                // Collect Social Media
                const socialRows = document.querySelectorAll('.social-row');
                const socialMedia = [];
                
                Array.from(socialRows).forEach(row => {
                    const select = row.querySelector('.platform-select');
                    const handle = row.querySelector('.handle-input').value.trim();
                    if (handle) {
                        const platformName = select.options[select.selectedIndex].text;
                        const url = 'https://' + select.value + handle;
                        socialMedia.push({
                            platform: platformName,
                            url: url
                        });
                    }
                });

                // Get phone number with country code
                let formattedPhone = '';
                const phoneInput = document.getElementById('speakerPhone');
                const itiInstance = phoneInputs.find(p => p.id === 'speakerPhone')?.iti;
                if (itiInstance) {
                    formattedPhone = itiInstance.getNumber();
                } else {
                    formattedPhone = phoneInput.value;
                }

                // Build Payload
                const payload = {
                    speakerWorkEmail: document.getElementById('email').value.trim(),
                    password: document.getElementById('password').value,
                    speakerPrefix: document.getElementById('speakerPrefix').value,
                    speakerFirstName: document.getElementById('speakerFirstName').value.trim(),
                    speakerLastName: document.getElementById('speakerLastName').value.trim(),
                    speakerCountry: document.getElementById('speakerCountry').value,
                    speakerJobTitle: document.getElementById('speakerJobTitle').value.trim(),
                    speakerOrganization: document.getElementById('speakerOrganization').value.trim() || '',
                    speakerPhone: formattedPhone,
                    speakerBio: document.getElementById('speakerBio').value.trim(),
                    speakertopic: document.getElementById('speakertopic').value.trim(),
                    speakerExperience: document.getElementById('speakerExperience').value.trim() || '',
                    ...(socialMedia.length > 0 && { socialMedia: socialMedia })
                };

                // Add photo URL if uploaded
                if (uploadedPhotoUrl) {
                    payload.profile_image = uploadedPhotoUrl;
                }

                console.log("Registration payload:", payload);

                // Use the RegisterAPI from apiClient.js to submit to backend
                const response = await window.RegisterAPI.registerSpeaker(payload);
                
                console.log("Backend response:", response);
                
                // Normalize response data and check for success
                const resData = response && response.data ? response.data : response || {};
                const speakerData = resData.speaker || resData.data?.speaker || resData;

                if (resData.success || resData.status === 'success' || resData.status === 200 || resData.id || speakerData?.id) {
                    // Store auth token if returned
                    const tokenVal = resData.token || resData.access_token || response.token || response.access_token;
                    if (tokenVal) {
                        const authData = {
                            token: tokenVal,
                            user: speakerData ? {
                                email: speakerData.work_email || speakerData.email || payload.speakerWorkEmail,
                                name: speakerData.fullname || `${payload.speakerFirstName} ${payload.speakerLastName}`,
                                type: speakerData.role || 'speaker'
                            } : {
                                email: payload.speakerWorkEmail,
                                name: `${payload.speakerFirstName} ${payload.speakerLastName}`,
                                type: 'speaker'
                            }
                        };
                        localStorage.setItem('authUser', JSON.stringify(authData));
                    }

                    updateConfirmationSection(speakerData);
                    showStep(3);

                    // Auto-login message when token present
                    if (tokenVal) {
                        const autoLoginDiv = document.createElement('div');
                        autoLoginDiv.className = 'auto-login-message';
                        autoLoginDiv.innerHTML = '<i class="fas fa-check-circle me-2"></i> You have been automatically logged in. You can now access your dashboard.';
                        document.querySelector('.confirmation-details').before(autoLoginDiv);
                    }
                } else {
                    throw new Error(resData.message || response.message || 'Registration failed. Please try again.');
                }
                
            } catch (error) {
                console.error('Registration error:', error);
                
                // Handle API validation errors (format you provided)
                if (error.original?.response?.data?.errors) {
                    const validationErrors = error.original.response.data.errors;
                    clearAllErrors();
                    
                    // Map each validation error to the appropriate field
                    validationErrors.forEach(err => {
                        const fieldId = err.path;
                        const errorElementId = `${fieldId}-error`;
                        showError(errorElementId, err.msg);
                    });
                    
                    // Show general error message
                    const errorDiv = document.createElement('div');
                    errorDiv.className = 'error-message';
                    errorDiv.innerHTML = `<strong>Validation Error:</strong> Please correct the errors in the form below.`;
                    errorDiv.style.display = 'block';
                    
                    // Remove any existing error messages
                    const existingError = document.querySelector('.form-section .error-message');
                    if (existingError) {
                        existingError.remove();
                    }
                    
                    // Insert error at top of form
                    const formSection = document.getElementById('profile-section');
                    formSection.insertBefore(errorDiv, formSection.firstChild);
                    
                    // Scroll to first error
                    const firstErrorField = document.querySelector('.help-block-error[style*="display: block"]');
                    if (firstErrorField) {
                        firstErrorField.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }
                } else {
                    // Extract error message from apiClient error format
                    const errorMessage = error.message || 
                                        error.original?.response?.data?.message || 
                                        error.original?.response?.data?.error ||
                                        'Registration failed. Please try again.';
                    
                    // Show error in a user-friendly way
                    const errorDiv = document.createElement('div');
                    errorDiv.className = 'error-message';
                    errorDiv.innerHTML = `<strong>Error:</strong> ${errorMessage}`;
                    errorDiv.style.display = 'block';
                    
                    // Remove any existing error messages
                    const existingError = document.querySelector('.form-section .error-message');
                    if (existingError) {
                        existingError.remove();
                    }
                    
                    // Insert error at top of form
                    const formSection = document.getElementById('profile-section');
                    formSection.insertBefore(errorDiv, formSection.firstChild);
                    
                    // Scroll to error
                    errorDiv.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }
                
            } finally {
                btn.disabled = false;
                btn.innerHTML = 'Complete Registration <i class="fas fa-check-circle ms-2"></i>';
            }
        }

        function clearAllErrors() {
            const errorElements = document.querySelectorAll('.help-block-error');
            errorElements.forEach(el => {
                el.style.display = 'none';
                el.textContent = '';
            });
            
            const inputElements = document.querySelectorAll('input, select, textarea');
            inputElements.forEach(el => {
                el.classList.remove('error');
            });
        }

        function validateAccountForm() {
            let isValid = true;
            const email = document.getElementById('email').value.trim();
            const pass = document.getElementById('password').value;
            const conf = document.getElementById('confirmPassword').value;

            if (!email || !email.includes('@') || !email.includes('.')) { 
                showError('email-error', 'Please enter a valid email address'); 
                isValid = false; 
            } else {
                hideError('email-error');
            }

            if (pass.length < 8) { 
                showError('password-error', 'Password must be at least 8 characters long'); 
                isValid = false; 
            } else {
                hideError('password-error');
            }

            if (pass !== conf) { 
                showError('confirmPassword-error', 'Passwords do not match'); 
                isValid = false; 
            } else {
                hideError('confirmPassword-error');
            }

            return isValid;
        }

        function validateProfileForm() {
            let isValid = true;
            const required = ['speakerPrefix', 'speakerFirstName', 'speakerLastName', 'speakerCountry', 'speakerJobTitle', 'speakerPhone', 'speakerBio', 'speakertopic'];
            
            required.forEach(field => {
                const el = document.getElementById(field);
                if (!el || !el.value.trim()) { 
                    showError(`${field}-error`, 'This field is required'); 
                    isValid = false; 
                } else {
                    hideError(`${field}-error`);
                }
            });

            
            // Validate phone number
            const phoneInput = document.getElementById('speakerPhone');
            const itiInstance = phoneInputs.find(p => p.id === 'speakerPhone')?.iti;
            if (phoneInput.value && itiInstance && !itiInstance.isValidNumber()) {
                showError('speakerPhone-error', 'Please enter a valid phone number');
                isValid = false;
            }
            
            // Validate social media handles
            const socialRows = document.querySelectorAll('.social-row');
            socialRows.forEach((row, index) => {
                const handle = row.querySelector('.handle-input').value.trim();
                if (handle && handle.length < 2) {
                    showError('speakerPhone-error', `Social media handle is too short`);
                    isValid = false;
                }
            });
            
            return isValid;
        }

        function updateConfirmationSection(speaker) {
            let firstName = document.getElementById('speakerFirstName').value;
            let lastName = document.getElementById('speakerLastName').value;
            let email = document.getElementById('email').value;

            if (speaker) {
                firstName = speaker.first_name || speaker.fname || speaker.fullname?.split(' ')[0] || firstName;
                lastName = speaker.last_name || speaker.lname || (speaker.fullname ? speaker.fullname.split(' ').slice(1).join(' ') : lastName);
                email = speaker.work_email || speaker.email || email;
            }

            document.getElementById('confirmation-name').textContent = `${firstName} ${lastName}`;
            document.getElementById('confirmation-email').textContent = email;
            document.getElementById('confirmation-email-text').textContent = email;
        }

        function showStep(step) {
            document.getElementById('account-section').style.display = step === 1 ? 'block' : 'none';
            document.getElementById('profile-section').style.display = step === 2 ? 'block' : 'none';
            document.getElementById('confirmation-section').style.display = step === 3 ? 'block' : 'none';
            currentStep = step;
            updateProgressIndicator();
            window.scrollTo(0, 0);
        }

        function updateProgressIndicator() {
            const dots = document.querySelectorAll('.progress-indicator.dots .dot');
            const line = document.getElementById('progress-line');
            if (line) line.style.width = ((currentStep - 1) / 2) * 100 + '%';

            dots.forEach((dot, i) => {
                dot.classList.toggle('completed', i + 1 < currentStep);
                dot.classList.toggle('active', i + 1 === currentStep);
            });
        }

        function showError(id, msg) {
            const el = document.getElementById(id);
            if (el) { 
                el.textContent = msg; 
                el.style.display = 'block'; 
            }
            const inputId = id.replace('-error', '');
            const inputElement = document.getElementById(inputId);
            if (inputElement) {
                inputElement.classList.add('error');
            }
        }

        function hideError(id) {
            const el = document.getElementById(id);
            if (el) el.style.display = 'none';
            const inputId = id.replace('-error', '');
            const inputElement = document.getElementById(inputId);
            if (inputElement) {
                inputElement.classList.remove('error');
            }
        }
    </script>
</body>
</html>